<!DOCTYPE html>

<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Imkertrainer</title>
<meta content="Oefenen en proefexamens voor de NBV basiscursus imkeren" name="description"/>
<link href="./styles.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 36 36%22&gt;&lt;text y=%2232%22 font-size=%2232%22&gt;üêù&lt;/text&gt;&lt;/svg&gt;" rel="icon"/>
<style>
    /* Extra ruimte tussen vragen in resultatenlijst */
    .wrong-list li { margin-bottom: 1rem; }
    </style></head>
<body>
<header class="app-header" role="banner">
<h1 aria-atomic="true" aria-live="polite"><a href="#" data-nav="home" id="link-home" style="color:inherit;text-decoration:none;">Imkertrainer</a></h1>
</header><img alt="Illustratie imkeren" class="hero-img" decoding="async" loading="lazy" src="assets/image/hero-beekeeping.webp"/>
<main class="container" id="app" role="main">
<!-- Startscherm -->
<section aria-labelledby="home-title" class="view active" id="view-home">
<h2 id="home-title"><img alt="" aria-hidden="true" class="icon" decoding="async" loading="lazy" src="assets/image/biologie.webp"/> Start</h2>
<p class="intro">Oefen- en proefexamen-tool voor de NBV basiscursus imkeren.</p>
<div class="btn-grid">
<button class="btn primary" data-nav="practice-settings" id="go-practice">Oefenen</button>
<button class="btn" data-nav="exam-settings" id="go-exam">Proefexamen</button>
</div>
<!-- Verwijderd: tekst 'laatste resultaat'. Alleen het overzicht blijft -->
<div class="card" id="history">
<h3>Jouw sessies (op dit apparaat)</h3>
<div class="btn-row" style="justify-content:flex-end; margin-top:.25rem">
<button class="btn" id="btn-reset-history" title="Wis resultatenoverzicht">Reset resultaten</button>
</div>
<table class="history" id="history-table">
<thead><tr><th>Type</th><th>Resultaat</th><th>Datum/tijd</th></tr></thead>
<tbody id="history-body"></tbody>
</table>
</div>
</section>
<!-- Oefeninstellingen -->
<section aria-labelledby="practice-settings-title" class="view" id="view-practice-settings">
<h2 id="practice-settings-title"><img alt="" aria-hidden="true" class="icon" decoding="async" loading="lazy" src="assets/image/jaarcyclus.webp"/> Oefeninstellingen</h2>
<p>Maak je themakeuze. Data wordt geladen zodra je deze pagina opent.</p>
<div class="card" id="theme-controls">
<div aria-live="polite" class="theme-list" id="themes">
<label class="check"><input id="all-themes" type="checkbox"/><span>Alle thema‚Äôs</span></label></div>
</div>
<div class="card" id="practice-controls">
<label for="practice-count">Aantal oefenvragen</label>
<select id="practice-count" style="margin-left:.5rem">
<option>5</option><option selected="">10</option><option>15</option><option>20</option>
<option>30</option><option>40</option><option>50</option>
</select>
<p class="muted" id="practice-availability" style="margin-top:.5rem"></p>
</div>
<div class="btn-row">
<button class="btn" data-nav="home">Terug</button>
<button class="btn primary" id="start-practice">Start Oefenen (10)</button>
</div>
</section>
<!-- Exameninstellingen -->
<section aria-labelledby="exam-settings-title" class="view" id="view-exam-settings">
<h2 id="exam-settings-title"><img alt="" aria-hidden="true" class="icon" decoding="async" loading="lazy" src="assets/image/wetgeving.webp"/> Proefexamen</h2>
<p>Het proefexamen bestaat uit 30 vragen uit alle thema's die in de basiscursus aan bod komen.</p>
<div class="btn-row">
<button class="btn" data-nav="home">Terug</button>
<button class="btn primary" id="start-exam">Start Proefexamen (30)</button>
</div>
</section>
<!-- Quiz -->
<section aria-labelledby="quiz-title" class="view" id="view-quiz">
<div class="quiz-header">
<h2 id="quiz-title"><img alt="" aria-hidden="true" class="icon" decoding="async" loading="lazy" src="assets/image/praktisch.webp"/> Vragen</h2>
<div class="progress"><div id="progress-bar"></div></div>
<div aria-live="polite" class="status" id="status"></div>
</div>
<article aria-atomic="true" aria-live="polite" class="card" id="question-card">
<div class="q-meta" id="q-meta"></div>
<h3 class="q-text" id="q-text"></h3>
<form aria-label="Antwoordopties" class="choices" id="q-form" role="radiogroup"></form>
<div class="explanation" hidden="" id="q-expl"></div>
</article>
<div class="btn-row">
<button aria-label="Vorige vraag" class="btn" id="btn-prev">‚Üê Vorige</button>
<button aria-label="Volgende vraag" class="btn" id="btn-next">Volgende ‚Üí</button>
</div>
</section>
<!-- Resultaten -->
<section aria-labelledby="results-title" class="view" id="view-results">
<h2 id="results-title"><img alt="" aria-hidden="true" class="icon" decoding="async" loading="lazy" src="assets/image/honing.webp"/> Resultaten</h2>
<div class="card" id="results-summary"></div>
<div class="card" id="results-details"></div>
<div class="btn-grid">
<button class="btn" data-nav="home">Terug naar start</button>
<button class="btn" id="btn-retry-same">Opnieuw (zelfde selectie)</button>
<button class="btn primary" id="btn-retry-new">Opnieuw (andere selectie)</button>
</div>
</section>
</main>
<!-- Verwijderd: footer met laatste resultaat -->
<script defer="" src="./app.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function(){
  // 1) Header link -> Home via delegated click inside #app
  const linkHome = document.getElementById('link-home');
  if (linkHome){
    linkHome.addEventListener('click', function(e){
      e.preventDefault();
      const navHome = document.querySelector('#app [data-nav="home"]');
      if (navHome){ navHome.click(); }
    });
  }

  // 2) Ensure "Alle thema‚Äôs" exists in #themes and behaves correctly,
  //    even after the app re-renders the list.
  function ensureAllThemes(){
    const wrap = document.getElementById('themes');
    if (!wrap) return;
    if (!wrap.querySelector('#all-themes')){
      const label = document.createElement('label');
      label.className = 'check';
      label.innerHTML = '<input id="all-themes" type="checkbox"/><span>Alle thema‚Äôs</span>';
      wrap.insertBefore(label, wrap.firstChild);
    }
    const allToggle = wrap.querySelector('#all-themes');
    if (allToggle && !allToggle._bound){
      allToggle._bound = true;
      allToggle.addEventListener('change', function(){
        const on = allToggle.checked;
        wrap.querySelectorAll('input[type="checkbox"][data-theme]').forEach(cb => cb.checked = on);
        // Probeer practice-availability te updaten als die bestaat
        try{
          const evt = new Event('change', {bubbles:true});
          wrap.dispatchEvent(evt);
        }catch{}
      });
    }
    // Sync state: als alle losse items aan staan, zet All aan
    const items = wrap.querySelectorAll('input[type="checkbox"][data-theme]');
    if (items.length){
      const allChecked = Array.from(items).every(cb => cb.checked);
      const at = wrap.querySelector('#all-themes');
      if (at) at.checked = allChecked;
    }
  }

  // run once
  ensureAllThemes();

  // Observe practice settings view for re-renders
  const practiceView = document.getElementById('view-practice-settings');
  if (practiceView){
    const mo = new MutationObserver(()=> ensureAllThemes());
    mo.observe(practiceView, {childList:true, subtree:true});
  }
});
</script>

</body>
</html>
